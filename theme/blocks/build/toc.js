!function(){"use strict";var e=window.wp.element,t=window.wp.blocks,l=window.wp.data,a=window.wp.components;(0,t.registerBlockType)("theme/toc",{title:"目次",icon:"list-view",category:"layout",attributes:{title:{type:"string",default:""},enableH3:{type:"boolean",default:!0},post_id:{type:"number",default:null}},edit:(0,l.withSelect)((e=>({blocks:e("core/block-editor").getBlocks(),current_id:e("core/editor").getCurrentPostId()})))((function(t){const{blocks:l=[],current_id:n,attributes:{title:s="",enableH3:c=!0,post_id:i},className:r,setAttributes:o}=t,d=r.replace(/\s.+?$/,""),m=[];return n!=i&&o({post_id:n}),l.forEach((e=>{"core/heading"===e.name&&e.attributes.level<4&&(2===e.attributes.level?m.push({h2:e.attributes.content,h3:[]}):m.length>0&&m[m.length-1].h3.push(e.attributes.content))})),(0,e.createElement)("div",{className:r},(0,e.createElement)("div",{className:`${d}__data`},(0,e.createElement)(a.TextControl,{value:s,onChange:e=>o({title:e}),placeholder:"目次",label:"見出し（任意）"}),(0,e.createElement)(a.ToggleControl,{label:"h3を有効にする",checked:c,onChange:()=>o({enableH3:!c})})),(0,e.createElement)("div",{className:`${d}__list`},m.map(((t,l)=>(0,e.createElement)("div",{key:l,className:`${d}__item`},(0,e.createElement)("span",null,t.h2),c&&t.h3.length>0&&(0,e.createElement)("div",{className:`${d}__list`},t.h3.map(((t,l)=>(0,e.createElement)("div",{key:l,className:`${d}__item`},(0,e.createElement)("span",null,t))))))))))})),save:()=>null})}();